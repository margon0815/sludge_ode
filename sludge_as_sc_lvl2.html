<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Dynamischer Schlammhaushalt in einer Kläranlage</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="sludge_as_sc_lvl2_files/libs/clipboard/clipboard.min.js"></script>
<script src="sludge_as_sc_lvl2_files/libs/quarto-html/quarto.js"></script>
<script src="sludge_as_sc_lvl2_files/libs/quarto-html/popper.min.js"></script>
<script src="sludge_as_sc_lvl2_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="sludge_as_sc_lvl2_files/libs/quarto-html/anchor.min.js"></script>
<link href="sludge_as_sc_lvl2_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="sludge_as_sc_lvl2_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="sludge_as_sc_lvl2_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="sludge_as_sc_lvl2_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="sludge_as_sc_lvl2_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Dynamischer Schlammhaushalt in einer Kläranlage</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>Markus Ahnert, Technische Universität Dresden, Institut für Siedlungs- und Industriewasserwirtschaft<br>
<a href="mailto:markus.ahnert@tu-dresden.de">markus.ahnert@tu-dresden.de</a></p>
<section id="erläuterungen" class="level3">
<h3 class="anchored" data-anchor-id="erläuterungen">Erläuterungen</h3>
<p>Die nachfolgenden Erläuterungen bauen auf dem <a href="https://swwdigit.de/bb_nkb1/">statischen Schlammhaushalt in einer Kläranlage</a> auf. Dabei werden die gleichen Vereinfachungen hinsichtlich des gegenseitigen Aufhebens von</p>
<ul>
<li>Feststoffen im Zulauf</li>
<li>Biomassewachstum im Belebungsbecken</li>
<li>Abzug von Überschussschlamm und</li>
<li>Feststoffen im Ablauf im gereinigten Abwasser</li>
</ul>
<p>angenommen. Daraus ergeben sich die Stoffströme wie in nachfolgender Abbildung.</p>
<div class="cell">
<div class="cell-output-display">
<div class="shiny-plot-output html-fill-item" id="wwtp_complete" style="width:100%;height:400px;"></div>
</div>
</div>
<p>Zusätzlich wird hier nun eine dynamische Zuflusserhöhung eingeführt. Die Zulaufmenge Q kann mit einem Faktor fQ erhöht werden. Dies erfolgt für 24 Stunden zwischen Tag 2 und 3 des 5tägigen Simulationszeitraums. Die Zuflusserhöhung sorgt für eine Schlammverlagerung zwischen Belebungs- und Nachklärbecken, die je nach eingestellten Parametern und Betriebsbedingungen unterschiedlich stark ausfällt. Nach Rückkehr zur Ausgangszulaufmenge dauert es je nach Einstellungen wieder einige Zeit, bis sich wieder die Werte auf einen statischen Zustand eingestellt haben. Diese Schlammverlagerung ist besonders für die Prozesse der Nitrifikation interessant. Im Niederschlagsfall wird aus dem Kanalnetz eine vglw. große Sticktofffracht am Ereignisbeginn in die Kläranlage verlagert. Durch die gleichzeitige Verlagerung von Schlamm und der darin enthaltenen Biomasse kann sich so eine Situation einstellen, bei der es zu einer sprunghaften Erhöhung der Ablaufkonzentration an Ammonium kommt und somit die Gefahr einer Überschreitung des Überwachungswertes besteht. Daher ist die Schlammverlagerung in der Kläranlage möglichst gering zu halten, wobei eine direkte Beeinflussung durch den Kläranlagenbetrieb kaum möglich ist. Gleichzeitig wird bei der Auslegung des Gesamtsystems aus Kanalnetz und Kläranlage angestrebt, einen möglichst großen Teil des anfallenden Niederschlagswassers in der Kläranlage mit zu behandeln, um die Gewässerbelastung über Mischwassereinleitungen zu minimieren.</p>
</section>
<section id="übungsbeispiel" class="level3">
<h3 class="anchored" data-anchor-id="übungsbeispiel">Übungsbeispiel</h3>
<p>Im nachfolgenden Beispiel wird für das Belebungsbecken ein Volumen von 1000 m³ in der Berechnung angesetzt, für das Nachklärbecken eine Oberfläche von 150 m². Zusätzlich zu den Betriebseinstellungen aus der Berechnung des <a href="https://swwdigit.de/bb_nkb1/">statischen Schlammhaushalts in einer Kläranlage</a> kann die Zulaufmenge Q über den Faktor fQ erhöht werden.</p>
<section id="aufgaben" class="level4">
<h4 class="anchored" data-anchor-id="aufgaben">Aufgaben</h4>
<ul>
<li>Wie verändert sich qualitativ die Schlammspiegelhöhe im Nachklärbecken?</li>
<li>Welcher Parameter hat den größten Einfluss auf die Schlammspiegelhöhe?</li>
<li>Welcher Anteil an Belebschlamm befindet sich im steady state vor Zulauferhöhung bzw. nach Rückkehr zum Normaldurchfluss im Belebungsbecken und welcher befindet sich im Schlammbett des Nachklärbeckens?</li>
<li>Wie lange dauert es bei den voreingestellten Parametern ungefähr, bis sich nach Zuflusserhöhung ein neues Gleichgewicht eingestellt hat?</li>
<li>Wie ändert sich diese Einschwingzeit, wenn der ISV höher wird? Wie kann das erklärt werden?</li>
</ul>
<div class="cell">
<div class="cell-output-display">
<div class="container-fluid">
<div class="row">
<div class="col-sm-6">
<div class="form-group shiny-input-container">
<label class="control-label" id="Q-label" for="Q">Zulaufmenge Q [m³/d]:</label>
<input class="js-range-slider" id="Q" data-skin="shiny" data-min="100" data-max="20000" data-from="1000" data-step="100" data-grid="true" data-grid-num="9.95" data-grid-snap="false" data-prettify-separator="," data-prettify-enabled="true" data-keyboard="true" data-data-type="number">
</div>
</div>
<div class="col-sm-6">
<div class="form-group shiny-input-container">
<label class="control-label" id="fQ-label" for="fQ">Zulauferhöhung fQ [-]:</label>
<input class="js-range-slider" id="fQ" data-skin="shiny" data-min="1" data-max="10" data-from="2" data-step="0.5" data-grid="true" data-grid-num="9" data-grid-snap="false" data-prettify-separator="," data-prettify-enabled="true" data-keyboard="true" data-data-type="number">
</div>
</div>
</div>
<div class="row">
<div class="col-sm-6">
<div class="form-group shiny-input-container">
<label class="control-label" id="RV-label" for="RV">Rücklaufverhältnis RV [-]:</label>
<input class="js-range-slider" id="RV" data-skin="shiny" data-min="0.5" data-max="1" data-from="1" data-step="0.05" data-grid="true" data-grid-num="10" data-grid-snap="false" data-prettify-separator="," data-prettify-enabled="true" data-keyboard="true" data-data-type="number">
</div>
</div>
<div class="col-sm-6">
<div class="form-group shiny-input-container">
<label class="control-label" id="XBB-label" for="XBB">TS-Gehalt Belebungsbecken TS_BB [g/L]:</label>
<input class="js-range-slider" id="XBB" data-skin="shiny" data-min="1" data-max="5" data-from="3" data-step="0.1" data-grid="true" data-grid-num="10" data-grid-snap="false" data-prettify-separator="," data-prettify-enabled="true" data-keyboard="true" data-data-type="number">
</div>
</div>
</div>
<div class="row">
<div class="col-sm-6">
<div class="form-group shiny-input-container">
<label class="control-label" id="ISV-label" for="ISV">Schlammvolumenindex ISV [mL/kg]:</label>
<input class="js-range-slider" id="ISV" data-skin="shiny" data-min="50" data-max="200" data-from="100" data-step="5" data-grid="true" data-grid-num="10" data-grid-snap="false" data-prettify-separator="," data-prettify-enabled="true" data-keyboard="true" data-data-type="number">
</div>
</div>
</div>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="shiny-plot-output html-fill-item" id="wwtp_simple1" style="width:100%;height:400px;"></div>
</div>
</div>
<p>
<script type="application/shiny-prerendered" data-context="server-start">
library("shiny")
library("knitr")
library("jpeg")
library("deSolve")
library("Ecfun")


# conceptual model for dynamic system of activated sludge reactor and secondary 
# clarifier with variable sludge height based on Krebs et al., 2000

# Markus Ahnert, Dresden University of Technology, Institute for Urban Water Management
# markus.ahnert@tu-dresden.de

# Bild nur am Anfang einlesen, spart Rechenzeit
#image_complete <- readJPEG("www/as_sc_scheme_complete.jpg") 
image_simple1 <- readJPEG("www/as_sc_scheme_simple1.jpg")
image_simple1_normal <- readJPEG("www/as_sc_scheme_simple1_normal.jpg") 

t_start <- 0 # start time
t_end <- 5 # end time
t_points <- seq(t_start, t_end, by = 0.01) # time points for solution

# ode function
source("func_sludge_ode.R")


</script>
 
<script type="application/shiny-prerendered" data-context="server">
#
# zur Erklaerung was #|context:server bedeutet
# siehe https://quarto.org/docs/interactive/shiny/execution.html

output$wwtp_complete <- renderPlot({
  # plot ohne Inhalt aber mit bekannten Koordinaten
  par(mar=c(0,0,0,0))
  plot(NA, type="n", xlim=c(0,10), ylim=c(0,10), axes=FALSE, xlab="", ylab="")
  # die usr-Koordinaten sind die echten Koordinaten, inklusive Reserve, die
  # R automatisch hinzufuegt
  lim <- par("usr")

  # image auf volle Groesse des Plots als Hintergrundbild setzen
  rasterImageAdj(image_simple1_normal, xleft=lim[1], ybottom=lim[3], xright=lim[2], ytop=lim[4])

  # jetzt kann man beliebige Sachen irgendwo hinschreiben,
  # und zwar mit normalem R ohne html-Tricks
  box(lwd=1)
})
</script>
 
<script type="application/shiny-prerendered" data-context="server">
ode_result <- reactive({

# get parameters from sliders, some are fixed  
params <- c(Q = input$Q, R=input$RV, V_BB=1000, A_NKB=150, DSVI=input$ISV )

# initial state
X_BB0 <- input$XBB # get it from slider

Ms_NKB0 <- unname((9e-7)*(input$XBB*input$ISV)^3.319)
state_0 <- c(X_BB=X_BB0, Ms_NKB = Ms_NKB0) # empirical estimation of start mass in SC

# function for dynamic inflow rate with constant values for steady state solution
fQ <- 1
influentdata <- data.frame(time = c(0, 2, 3, 100) ,
                           value = c(params["Q"], fQ*params["Q"], params["Q"], params["Q"]))
influentfun <- approxfun(influentdata, method="constant")

# solving ode system for steady state solution
out <- ode(y = state_0, times = t_points, func = sludge_ode, parms = params, influentfcn=influentfun)

# function for dynamic inflow rate with constant values for dynamic solution
fQ <- input$fQ
influentdata <- data.frame(time = c(0, 2, 3, 100) ,
                           value = c(params["Q"], fQ*params["Q"], params["Q"], params["Q"]))
influentfun <- approxfun(influentdata, method="constant")

# definition of new state
X_BB0 <- unname(out[nrow(out), 2])
Ms_NKB0 <- unname(out[nrow(out), 3])

state_0 <- c(X_BB=X_BB0, Ms_NKB = Ms_NKB0) 

# solving ode system for dynamic solution
out <- ode(y = state_0, times = t_points, func = sludge_ode, parms = params, influentfcn=influentfun)

})

output$wwtp_simple1 <- renderPlot({

  # Ergebnisse holen
  out <- ode_result()
  
  time <- out[,1]
  X_BB <- out[,2] 
  X_R <- out[,5]
  hs <- out[,6]
  MsBB <- out[,4]
  MsNKB <- out[,3]
  Qin <- out[,7]
  QX_BB <- Qin*(1+input$RV)*X_BB
  QX_R <- Qin*input$RV*X_R

# general preferences for the plot
par(mfrow = c(2, 2),
          mar = c(4,4,2,2)+0.1)    

std_ftsize <- 1.5 # standard font size
std_lwd <- 2 # standard line width

# plot sludge height
plot(x=time,y=hs,type="l",lwd=std_lwd,
     xlab = NA, ylab = "Höhe [m]", main = "Schlammspiegel im NKB",
     cex.main=std_ftsize,cex.sub=std_ftsize,cex.lab=std_ftsize,cex.axis=std_ftsize) 

# plot mass flux
plot(time, MsBB, type = "n", xlim = c(0, 5), ylim = c(min(QX_BB,QX_R), max(QX_BB,QX_R)),
     xlab = NA, ylab = "Feststofffluss [kg/h]", main = "Feststoffströme",
     cex.main=std_ftsize,cex.sub=std_ftsize,cex.lab=std_ftsize,cex.axis=std_ftsize) 

# Plot each line one by one
lines(time, QX_BB, type = "l", col = "black",lwd=std_lwd)
lines(time, QX_R, type = "l", col = "firebrick",lty=2,lwd=std_lwd)
# Add a legend
legend("right", legend = c("ins NKB", "ins BB"), 
       col = c("black", "firebrick"), lty = c(1,2), inset=0.01,cex=std_ftsize)

  
# plot solids conc
plot(time, X_BB, type = "n", xlim = c(0, 5), ylim = c(min(X_BB), max(X_R)),
     xlab = "Zeit [d]", ylab = "TS-Konzentration [g/L]", main = "Feststoffgehalte",
     cex.main=std_ftsize,cex.sub=std_ftsize,cex.lab=std_ftsize,cex.axis=std_ftsize) 

# Plot each line one by one
lines(time, X_BB, type = "l", col = "black",lwd=std_lwd)
lines(time, X_R, type = "l", col = "firebrick",lty=2,lwd=std_lwd)
# Add a legend
legend("right", legend = c("BB", "RLS"), 
       col = c("black", "firebrick"), lty = c(1,2), inset=0.01,cex=std_ftsize, ncol=2)


# plot mass content
plot(time, MsBB, type = "n", xlim = c(0, 5), ylim = c(min(MsBB,MsNKB), max(MsBB,MsNKB)),
     xlab = "Zeit [d]", ylab = "Feststoffmasse [kg]", main = "gespeicherte Massen",
     cex.main=std_ftsize,cex.sub=std_ftsize,cex.lab=std_ftsize,cex.axis=std_ftsize) 
   
# Plot each line one by one
lines(time, MsBB, type = "l", col = "black",lwd=std_lwd)
lines(time, MsNKB, type = "l", col = "firebrick",lty=2,lwd=std_lwd)
# Add a legend
legend("right", legend = c("BB", "NKB"), 
       col = c("black", "firebrick"), lty = c(1,2), inset=0.01,cex=std_ftsize)

# box(lwd=1) works only for single image

})
</script>
 
<script type="application/shiny-prerendered" data-context="server-extras">
ojs_define <- function(..., .session = shiny::getDefaultReactiveDomain()) {
  quos <- rlang::enquos(...)
  vars <- rlang::list2(...)
  nm <- names(vars)
  if (is.null(nm)) {
    nm <- rep_len("", length(vars))
  }
  mapply(function(q, nm, val) {
    # Infer name, if possible
    if (nm == "") {
      tryCatch({
        nm <- rlang::as_name(q)
      }, error = function(e) {
        code <- paste(collapse = "\n", deparse(rlang::f_rhs(q)))
        stop("ojs_define() could not create a name for the argument: ", code)
      })
    }
    .session$output[[nm]] <- val
    outputOptions(.session$output, nm, suspendWhenHidden = FALSE)
    .session$sendCustomMessage("ojs-export", list(name = nm))
    NULL
  }, quos, nm, vars, SIMPLIFY = FALSE, USE.NAMES = FALSE)
  invisible()
}
</script>
</p>
<!--html_preserve-->
<script type="application/shiny-prerendered" data-context="dependencies">
{"type":"list","attributes":{},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["jquery"]},{"type":"character","attributes":{},"value":["3.6.0"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www/shared"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["jquery.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["shiny"]},{"type":"logical","attributes":{},"value":[false]},{"type":"character","attributes":{},"value":["1.7.5.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ionrangeslider-javascript"]},{"type":"character","attributes":{},"value":["2.3.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www/shared/ionrangeslider"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["js/ion.rangeSlider.min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["shiny"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.7.5.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["strftime"]},{"type":"character","attributes":{},"value":["0.9.2"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www/shared/strftime"]}]},{"type":"NULL"},{"type":"character","attributes":{},"value":["strftime-min.js"]},{"type":"NULL"},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["shiny"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.7.5.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["ionrangeslider-css"]},{"type":"character","attributes":{},"value":["2.3.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www/shared/ionrangeslider"]}]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["css/ion.rangeSlider.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["shiny"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.7.5.1"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["name","version","src","meta","script","stylesheet","head","attachment","package","all_files","pkgVersion"]},"class":{"type":"character","attributes":{},"value":["html_dependency"]}},"value":[{"type":"character","attributes":{},"value":["bootstrap"]},{"type":"character","attributes":{},"value":["3.4.1"]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["file"]}},"value":[{"type":"character","attributes":{},"value":["www/shared/bootstrap"]}]},{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["viewport"]}},"value":[{"type":"character","attributes":{},"value":["width=device-width, initial-scale=1"]}]},{"type":"character","attributes":{},"value":["js/bootstrap.min.js","accessibility/js/bootstrap-accessibility.min.js"]},{"type":"character","attributes":{},"value":["css/bootstrap.min.css","accessibility/css/bootstrap-accessibility.min.css"]},{"type":"NULL"},{"type":"NULL"},{"type":"character","attributes":{},"value":["shiny"]},{"type":"logical","attributes":{},"value":[true]},{"type":"character","attributes":{},"value":["1.7.5.1"]}]}]}
</script>
<!--/html_preserve-->
<!--html_preserve-->

<script type="application/shiny-prerendered" data-context="execution_dependencies">
{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages"]}},"value":[{"type":"list","attributes":{"names":{"type":"character","attributes":{},"value":["packages","version"]},"class":{"type":"character","attributes":{},"value":["data.frame"]},"row.names":{"type":"integer","attributes":{},"value":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73]}},"value":[{"type":"character","attributes":{},"value":["base","bitops","BMA","bslib","cachem","cli","cluster","colorspace","compiler","datasets","DEoptimR","deSolve","digest","Ecfun","ellipsis","evaluate","fastmap","fda","fds","glue","graphics","grDevices","grid","hdrcde","htmltools","htmlwidgets","httpuv","httr","inline","jpeg","jquerylib","jsonlite","KernSmooth","knitr","ks","later","lattice","leaps","lifecycle","magrittr","MASS","Matrix","mclust","memoise","methods","mime","mvtnorm","pcaPP","pracma","promises","R6","rainbow","Rcpp","RCurl","rlang","rmarkdown","robustbase","rrcov","rstudioapi","rvest","sass","shiny","splines","stats","stats4","survival","TeachingDemos","tools","utils","xfun","xml2","xtable","yaml"]},{"type":"character","attributes":{},"value":["4.3.2","1.0-7","3.18.17","0.5.1","1.0.8","3.6.1","2.1.4","2.1-0","4.3.2","4.3.2","1.1-3","1.38","0.6.33","0.3-2","0.3.2","0.23","1.1.1","6.1.4","1.8","1.6.2","4.3.2","4.3.2","4.3.2","3.4","0.5.7","1.6.2","1.6.12","1.4.7","0.3.19","0.1-10","0.1.4","1.8.7","2.23-22","1.45","1.14.1","1.3.1","0.22-5","3.1","1.0.4","2.0.3","7.3-60","1.6-2","6.0.1","2.0.1","4.3.2","0.12","1.2-4","2.0-4","2.4.4","1.2.1","2.5.1","3.7","1.0.11","1.98-1.13","1.1.2","2.25","0.99-1","1.7-4","0.15.0","1.0.3","0.4.7","1.7.5.1","4.3.2","4.3.2","4.3.2","3.5-7","2.12","4.3.2","4.3.2","0.41","1.3.5","1.8-4","2.3.7"]}]}]}
</script>
<!--/html_preserve-->
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>